<!DOCTYPE html>
<html lang="pt-br">
<head>
    <link rel="stylesheet" href="home.css">
    <link rel="stylesheet" href="chamados.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domus - Chamados (Morador)</title>
</head>
<body>

    <div class="barr">
        <h1>Domus</h1>
    <div class="bar-text">
         <div class="gif-org">
            <a href="inicio.html"> <img class="gif" src="../../public/assets/image/botao-de-inicio.png"> <h3>Inicio</h3> </a>
            <a href="financas_morador.html"> <img class="gif" src="../../public/assets/video/output-onlinegiftools.gif"> <h3>Finanças</h3> </a>
            <a href="mensagens_morador.html"> <img class="gif" src="../../public/assets/video/output-onlinegiftools (1).gif"> <h3>Mensagens</h3> </a>
            <a href="chamados_morador.html"> <img class="gif" src="../../public/assets/video/output-onlinegiftools (6).gif  ">  <h3>Chamados</h3> </a>
            <a href="sobre.html"> <img class="gif" src="../../public/assets/video/output-onlinegiftools (4).gif"> <h3>sobre</h3> </a>
            <a href=""> <img class="contato" src="/public/assets/image/instagram.png"</a>

         </div>
    </div>
</div>
<div class="cab">
    <a href="settings"><img class="settings" src="../../public/assets/image/settings.png"></a>
    <div class="profile-container">
        <a><img class="user" id="profile-icon" src="../../public/assets/image/user (1).png" alt="Perfil"> </a>
        <div class="dropdown-menu" id="dropdown-menu">
            <div class="user-info">
                <p id="logged-user">Usuário logado</p>
            </div>
            <a href="/src/page/settings.html" id="settings">Configuração</a>
            <a href="/src/page/index.html" id="switch-account">Trocar de conta</a>
            <a href="/src/home/começo.html" id="logout">Sair</a>
        </div>
    </div>
</div>

<div class="content">
    <h2>Chamados de Manutenção (Morador)</h2>
    <p>Acompanhe e abra solicitações de manutenção.</p>
    <div class="chamados-section">
        <div class="new-chamado">
            <h3>Abrir Novo Chamado</h3>
            <form id="chamado-form">
                <label for="titulo">Título:</label>
                <input type="text" id="titulo" required>
                <label for="descricao">Descrição:</label>
                <textarea id="descricao" rows="5" required></textarea>
                <label for="prioridade">Prioridade:</label>
                <select id="prioridade">
                    <option value="baixa">Baixa</option>
                    <option value="media">Média</option>
                    <option value="alta">Alta</option>
                </select>
                <button type="submit">Abrir Chamado</button>
            </form>
        </div>
        <div class="chamados-list">
            <h3>Chamados Abertos</h3>
            <div class="chamado-item">
                <h4>Problema no Elevador</h4>
                <p>Status: Em andamento</p>
                <p>Prioridade: Alta</p>
                <p>Descrição: Elevador parou no 5º andar.</p>
            </div>
            <div class="chamado-item">
                <h4>Vazamento na Cozinha</h4>
                <p>Status: Pendente</p>
                <p>Prioridade: Média</p>
                <p>Descrição: Vazamento na torneira da cozinha coletiva.</p>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const profileIcon = document.getElementById('profile-icon');
        const dropdownMenu = document.getElementById('dropdown-menu');
        const loggedUser = document.getElementById('logged-user');
        const settings = document.getElementById('settings');
        const switchAccount = document.getElementById('switch-account');
        const logout = document.getElementById('logout');

        const usuario = localStorage.getItem('usuario');
        if (usuario) {
            loggedUser.textContent = usuario;
        } else {
            loggedUser.textContent = 'Usuário não logado';
        }

        profileIcon.addEventListener('click', function(event) {
            event.preventDefault();
            dropdownMenu.classList.toggle('show');
        });

        document.addEventListener('click', function(event) {
            if (!profileIcon.contains(event.target) && !dropdownMenu.contains(event.target)) {
                dropdownMenu.classList.remove('show');
            }
        });

        switchAccount.addEventListener('click', function(event) {
            event.preventDefault();
            window.location.href = 'index.html';
        });

        settings.addEventListener('click', function(event) {
            event.preventDefault();
            window.location.href = '/src/page/settings.html';
        });

        logout.addEventListener('click', function(event) {
            event.preventDefault();
            localStorage.removeItem('usuario');
            window.location.href = '/src/home/começo.html';
        });

        // Handle chamado form submission
        const chamadoForm = document.getElementById('chamado-form');
        chamadoForm.addEventListener('submit', function(event) {
            event.preventDefault();
            alert('Chamado aberto com sucesso!');
            chamadoForm.reset();
        });
    });
</script>

</body>
</html>
